import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.util.ArrayList;
import java.util.Scanner;

public class War
{
    private static Deck gameDeck;
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        gameDeck = new Deck();
        gameDeck.shuffleDeck();

        // War
        int money = 1000;
        int dealerWins = 0;
        int playerWins = 0;
        int betAmount = 0;
        List<Card> userHand = gameDeck.drawCard(26);
        List<Card> dealerHand = gameDeck.drawCard(26);
        for (int i = 0; i < userHand.size() - 1 && i < dealerHand.size() - 1; i++){
            if (money <= 0){
                slowPrint("You're out of money");
                break;
            }
            slowPrintnln("How much would you like to bet: $");
            betAmount = input.nextInt();
            slowPrint("Player: " + userHand.get(i).getName());
            slowPrint("Dealer: " + dealerHand.get(i).getName());
            if (userHand.get(i).getValue() > dealerHand.get(i).getValue()){
                slowPrint("Player wins");
                money += betAmount;
                playerWins++;

            } else if (userHand.get(i).getValue() < dealerHand.get(i).getValue()){
                slowPrint("Dealer wins");
                money -= betAmount;
                dealerWins++;

            } else {
                slowPrint("Tie, go to War!");
                boolean war = true;
                int warNum = 1;
                while (war){
                    slowPrint("Player: " + userHand.get(i + warNum).getName());
                    slowPrint("Dealer: " + dealerHand.get(i + warNum).getName());
                    if (userHand.get(i + warNum).getValue() > dealerHand.get(i + warNum).getValue()){
                        slowPrint("Player wins the War");
                        money += betAmount;
                        war = false;
                        playerWins++;
                    } else if (userHand.get(i + warNum).getValue() < dealerHand.get(i + warNum).getValue()){
                        slowPrint("Dealer wins the War");
                        money -= betAmount;
                        war = false;
                        dealerWins++;
                    } else {
                        slowPrint("Tie, go to War! Again");
                    }
                }
            }
            slowPrint("You have $" + money + " left");
            betAmount = 0;
            System.out.println();
        }
        if (playerWins > dealerWins){
            slowPrint("Player won the game");
        } else if (dealerWins > playerWins){
            slowPrint("Dealer won the game");
        } else {
            slowPrint("Tie!!!");
        }
    }
    
    public static void slowPrint(String strMessage) {
        char[] chars = strMessage.toCharArray();

        for (char c : chars) {
            System.out.print(c);
            sleep(50);
        }
        System.out.println();
    }
    
    public static void slowPrintnln(String strMessage) {
        char[] chars = strMessage.toCharArray();

        for (char c : chars) {
            System.out.print(c);
            sleep(50);
        }
    }
    
    public static void sleep(int time) {
        try {
            Thread.sleep(time);
        } catch (InterruptedException e) {
            // ignored
        }
    }
    
    public static void clearConsole() {
        System.out.print("\033[H\033[2J");
        System.out.flush();
    }

}
